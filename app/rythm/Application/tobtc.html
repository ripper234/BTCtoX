@import java.math.BigDecimal;
@extends(main)
@set(title = "Convert BTC to other currencies")
@args BigDecimal btcRate, Map rates

<div class="container">

    <p><input id="amount" class='amount' name="amount" placeholder='0.00' autofocus >
        <select id="to" name="to" class="currency" >
            @for(Map.Entry rate : rates.entrySet()) {
                <option value="@rate.getValue()">@rate.getKey()</option>
            }
        </select>
        = <span class="result">0.00</span> BTC
    </p>

    <script type="text/javascript">
        function update() {
            var amount = $("#amount").val();
            var toRate = $("#to").val();
            var btcRate = @btcRate.toString();
            $(".result").text(amount / toRate / btcRate);
        }

        $("#to").change(update);
        $("#amount")
            .keydown(function(){setTimeout(update, 0)});

    </script>
</div>